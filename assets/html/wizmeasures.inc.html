<h4 id="title" class="text-center">
  Dokumentation übergreifender Massnahmen und Vorlagen
</h4>
<h4 class="text-center">
  <small>Mit diesem Assistenten erzeugen Sie in wenigen Schritten eine Dokumentation für übergreifende Massnahmen oder Vorlagen zur Verwendung in anderen Dokumentationen.</small>
</h4>
<!-- Wizard navigation -->
<div class="wizard-navigation">
  <div class="progress-with-circle">
    <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="6" style="width: 15%;"></div>
  </div>
  <ul>

    <!-- Wizard tab #1 -->
    <li>
      <a href="#allgemein" data-toggle="tab">
        <div class="icon-circle">
          <i class="fa fa-info"></i>
        </div>
        Allgemein
      </a>
    </li>

    <!-- Wizard tab #2 -->
    <li>
      <a href="#massnahmen" data-toggle="tab">
        <div class="icon-circle">
          <i class="fa fa-clipboard"></i>
        </div>
        Maßnahmen
      </a>
    </li>

    <!-- Wizard tab #3 -->
    <li>
      <a href="#abhaengigkeiten" data-toggle="tab">
        <div class="icon-circle">
          <i class="fa fa-exchange"></i>
        </div>
        Abhängigkeiten
      </a>
    </li>

    <!-- Wizard tab #4 -->
    <li>
      <a href="#abschluss" data-toggle="tab">
        <div class="icon-circle">
          <i class="fa fa-archive"></i>
        </div>
        Abschluss
      </a>
    </li>
  </ul>
</div>

<!-- Wizard tab contents -->
<div class="tab-content">

  <!-- Wizard tab content #1 -->
  <div class="tab-pane" id="allgemein">
    <div class="row">
      <div class="col-sm-12">
        <h5 class="info-text text-ul">Allgemeine Angaben</h5>
      </div>
      <div class="col-sm-10 col-sm-offset-1 printHide">
        <div class="form-group">
          <label>Bezeichnung <i data-toggle="tooltip" title="Eindeutiges Kürzel" class="fa fa-question-circle-o fa-lg"></i></label>
          <input data-tool="typeahead" data-action="getsuggestions" data-minlength="0" data-dynamic="false" data-cache="true" data-display="entry" data-path="data.allgemein_bezeichnung.de" type="text" class="form-control" name="allgemein_bezeichnung" placeholder="Bsp.: E-Mail Service" required>
          <input type="hidden" name="meta_id" value="0" />
          <input type="hidden" name="meta_lastupdate" value="" />
          <input type="hidden" name="allgemein_typ" value="4" />
        </div>
      </div>
      <div class="col-sm-10 col-sm-offset-1">
        <div class="form-group">
          <label>Beschreibung <i data-toggle="tooltip" title="Ausführliche Beschreibung der Massnahmen" class="fa fa-question-circle-o fa-lg"></i></label><br />
          <textarea class="form-control" name="allgemein_beschreibung" placeholder="Bsp.: Übergreifene Massnahmen für die Absicherung von Server-Räumen" rows="5"></textarea>
        </div>
      </div>
      <div class="col-sm-12">
        <h5 class="info-text text-ul">Innerorganisatorische Ansprechpartner</h5>
      </div>
      <div class="col-sm-10 col-sm-offset-1">
        <div class="form-group">
          <label>Verantwortliche Organisationseinheit</label><br />
            <input data-tool="typeahead" data-action="searchabteilung" data-minlength="0" type="text" class="form-control" name="allgemein_abteilung" placeholder="Bsp.: Zentrum für Informationsverarbeitung" required>
        </div>
        <div class="form-group">
          <label>Betreuende IVV</label><br />
          <input data-tool="typeahead" data-action="searchivv" data-minlength="0" type="text" class="form-control" name="allgemein_ivv" placeholder="Bsp.: IVV 09  Zentrale Universitätsverwaltung">
        </div>
      </div>
      <div class="col-sm-6 col-sm-offset-3">
        <h6 class="info-text">Ansprechpartner <i data-toggle="tooltip" title="Ansprechpartner für technische Fragen zu den Massnahmen <br /><br /> Es kann ein Mitarbeiter aus der Liste gewählt oder eine Funktionsbezeichnung (z.B. Leiter Abt. 3) eingetragen werden. Der automatische Zugriff bzw. die E-Mail-Benachrichtigungen funktionieren nur bei Auswahl eines Mitarbeiters aus der Liste!" class="fa fa-question-circle-o fa-lg"></i></h6>
        <div class="form-group">
          <label>Name</label><br />
          <input data-tool="typeahead" data-action="searchmitarbeiter" data-minlength="0" data-dynamic="true" data-cache="false" data-hiddenfield="allgemein_fachlich_kennung" type="text" class="form-control" name="allgemein_fachlich_name" placeholder="Geben Sie eine Kennung oder einen Namen (min. 4 Zeichen) ein..." required>
          <input type="hidden" name="allgemein_fachlich_kennung">
        </div>
      </div>
    </div>
  </div>

  <!-- Wizard tab content #2 -->
  <div class="tab-pane" id="massnahmen">
    <div class="row">
      <div class="col-sm-offset-1 col-sm-10">
        <h5 class="info-text text-ul">Schutzbedarf</h5>
      </div>
      <div class="col-sm-offset-1 col-sm-10 text-center">
        <div class="btn-group">
          <label class="btn btn-success">
            <input type="radio" name="massnahmen_risiko" value="1" /> Niedrig
          </label>
          <label class="btn btn-warning">
            <input type="radio" name="massnahmen_risiko" value="2" checked /> Normal
          </label>
          <label class="btn btn-danger">
            <input type="radio" name="massnahmen_risiko" value="3" /> Hoch
          </label>
        </div>
        <p class="mt" id="riskText"></p>
      </div>
      <div class="col-sm-offset-1 col-sm-10">
        <h5 class="info-text text-ul">Technische und organisatorische Maßnahmen <i data-toggle="tooltip" data-html="true" title="Vergleiche
Art. 25 DSGVO Datenschutz durch Technikgestaltung und durch datenschutzfreundliche Voreinstellungen, Art. 32 DSGVO Sicherheit der Verarbeitung" class="fa fa-question-circle-o fa-lg"></i></h5>
        <h6 class="info-text text-ul-dot printHide">1. Bausteine auswählen</h6>
        <p class="printHide">Wählen Sie in der folgenden Liste die für Ihr IT-Verfahren relevanten Bausteine aus.</p>
      </div>
      <div class="col-sm-offset-1 col-sm-10 printHide" id="toggletoms">
        <ul class="nav nav-tabs printHide" role="tablist">
        </ul>
        <div class="tab-content" style="min-height: auto;border: 1px solid lightgray;margin-bottom: 20px;padding: 5px;">
        </div>
      </div>
      <div class="col-sm-offset-1 col-sm-10">
        <h6 class="info-text text-ul-dot printHide">2. Sicherheitsmaßnahmen angeben</h6>
        <p class="printHide">Klicken Sie auf die Bausteine, um die jeweiligen Anforderungen anzuzeigen und den Umsetzungsstand sowie die Sicherheitsmaßnahmen anzugeben.</p>
        <div class="checkbox text-center printHide">
          <label><input type="checkbox" id="showFinishedTOMs" value="1" checked /> <strong>Bereits bearbeitete Anforderungen anzeigen</strong> <i data-toggle="tooltip" title="Wechselt zwischen der Anzeige aller Anforderungen oder nur unbearbeiteter Anforderungen." class="fa fa-question-circle-o fa-lg"></i></label>
        </div>
        <div class="panel-group" id="tom_accordion" role="tablist" aria-multiselectable="true">
        </div>
        <p style="padding:10px" class="bg-warning printHide"><i class="fa fa-info-circle"></i> <strong>Hinweis:</strong> Über die Vorschau-PDF erhalten Sie eine druckbare Checkliste aller Anforderungen.</p>
      </div>
    </div>
  </div>

  <!-- Wizard tab content #3 -->
  <div class="tab-pane" id="abhaengigkeiten">
    <div class="row">
      <div class="col-sm-12">
        <h5 class="info-text text-ul">Abhängigkeiten</h5>
      </div>

      <div class="col-sm-12">
        <h6 class="info-text text-ul-dot">Gruppierung von übegreifenden Massnahmen</h6>
      </div>
      <div class="col-sm-offset-1 col-sm-10">
        <p class="printOnly hidden">Die übegreifenden Massnahme setzt sich aus den folgenden dokumentierten übergreifenden Massnahmen zusammen:</p>
        <p class="printHide">Hier können übergreifende Massnahmen ausgewählt werden, um sie zu einer Dokumentation zu gruppieren.</p>
        <table data-tool="endlessTable" id="massnahmen_abhaengigkeit" class="table table-hover btn-table table-striped">
          <thead>
            <tr>
              <th>Übergreifene Massnahmen</th>
              <th>Beschreibung</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <input type="text" data-tool="typeahead" data-action="searchMassnahmen" data-minlength="0" data-dynamic="true" data-hiddenfield="massnahmen_abhaengigkeit_id[]" class="form-control" name="massnahmen_abhaengigkeit_name[]" placeholder="Bsp.: ISMS Massnahmen">
                <input type="hidden" name="massnahmen_abhaengigkeit_id[]">
                <div class="status printHide">
                  <label>Status:</label>
                  <span>Unbekannt <i data-toggle="tooltip" class="fa fa-question" title="Unbekannt"></i></span>
                </div>
                <div class="form-group">
                  <label>Betreiber:</label><br />
                  <input type="text" class="form-control" name="massnahmen_abhaengigkeit_betreiber[]" readonly />
                </div>
              </td>
              <td>
                <textarea class="form-control" rows="5" disabled></textarea>
              </td>
              <td class="text-center">
                <button type="button" class="massnahmen_abhaengigkeit_del btn btn-danger" title="Abhängigkeit aus Liste entfernen"><i class="fa fa-minus"></i> Entfernen</button><br />
                <a class="btn" style="margin-top: 2px;" target="_blank" title="Dokumentation in neuem Fenster öffnen" disabled>Anzeigen</a>
              </td>
            </tr>
          </tbody>
        </table>
        <button type="button" id="massnahmen_abhaengigkeit_add" class="btn btn-wd btn-success"><i class="fa fa-plus"></i> Hinzufügen</button>
      </div>
    </div>
  </div>

  <!-- Wizard tab content #4 -->
  <div class="tab-pane" id="abschluss">
    <div class="row">
      <div class="col-sm-12">
        <h5 class="info-text text-ul">Abschluss</h5>
      </div>

      <div class="col-sm-offset-1 col-sm-10 printHide">
        <h6 class="info-text text-ul-dot">Angehängte Dokumente</h6>
        <p>Hier können Sie bereits vorhandene Dokumente wie z.B. Betriebskonzept, Risikoanalyse, Netzplan etc. im PDF-Format zur Dokumentation in SecDoc hinterlegen.</p>
        <div class="alert alert-warning hidden" id="attached_documents_warning"></div>
        <table id="attached_documents" class="table table-hover btn-table">
          <thead>
            <tr>
              <th>Dateiname</th>
              <th>Dateigröße</th>
              <th>Beschreibung</th>
              <th>Anhängen <i data-toggle="tooltip" title="Dokument bei Abschluss in Gesamtdokumentation aufnehmen?" class="fa fa-question-circle-o fa-lg"></i></th>
              <th>Letzte Aktualisierung</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        <button type="button" id="attached_documents_add" class="btn btn-wd btn-success"><i class="fa fa-plus"></i> Hinzufügen</button>
      </div>

      <div class="col-sm-offset-1 col-sm-10 printHide dsbOnly">
        <h6 class="info-text text-ul-dot">Revisionen</h6>
        <table id="abschluss_revisionen" class="table table-hover btn-table">
          <thead>
            <tr>
              <th>Revision</th>
              <th>Datum</th>
              <th>Bearbeiter</th>
              <th>Kommentar</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>

      <div class="col-sm-offset-1 col-sm-10 printHide">
        <h6 class="info-text text-ul-dot">Zugriffsberechtigungen innerhalb von SecDoc</h6>
        <p>Hier können Sie Berechtigungen zum Lesen und/oder Bearbeiten einer Dokumentation festlegen. Eingetragene Nutzer oder Gruppen erhalten Lesezugriff, um Dokumentationen einsehen oder als Vorlagen verwenden zu können. Optional kann Schreibzugriff gewährt werden, um Kollegen die Mitarbeit in SecDoc zu ermöglichen.</p>
        <p style="padding:10px" class="bg-warning"><i class="fa fa-info-circle"></i> <strong>Hinweis:</strong> Sollten Sie nicht als Ersteller oder fachlicher bzw. technischer Ansprechpartner eingetragen sein, können Änderungen an den Berechtigungen Ihren Zugriff einschränken. Der/die Datenschutzbeauftragte sowie der/die Informationssicherheitsbeauftragte können unabhängig von den hier getätigten Einstellungen alle Dokumentationen einsehen.</p>
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active"><a href="#groupaccess" aria-controls="groupaccess" role="tab" data-toggle="tab"><i class="fa fa-users"></i> Gruppen</a></li>
          <li role="presentation"><a href="#useraccess" aria-controls="useraccess" role="tab" data-toggle="tab"><i class="fa fa-user"></i> Nutzer</a></li>
        </ul>
        <div class="tab-content" style="min-height: auto;">
          <div role="tabpanel" class="tab-pane active" id="groupaccess">
            <p style="padding-top:10px; padding-left:10px">Zugriff für Personen in vorhandenen Nutzergruppen (aus IDM) erlauben. Zusätzliche Nutzergruppen können über die WWU IT (siehe <a href="https://www.uni-muenster.de/IT/services/benutzerverwaltung/nutzergruppen.html" target="_blank"><i class="fa fa-external-link"></i> Nutzergruppen</a>) beantragt und verwaltet werden.</p>
            <table data-tool="endlessTable" id="meta_gruppen" class="table table-hover btn-table printHide">
              <thead>
                <tr>
                  <th>Gruppenkennung <i data-toggle="tooltip" title="Es muss zwingend eine vorhandene Gruppe aus der Liste ausgewählt werden!" class="fa fa-question-circle-o fa-lg"></i></th>
                  <th>Schreibzugriff</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <input type="text" data-tool="typeahead" data-action="getUserGroups" data-minlength="0" data-dynamic="true" data-cache="false" data-hiddenfield="meta_gruppen_kennung[]" data-mustselectitem="true" class="form-control" name="meta_gruppen_name[]" placeholder="Bsp.: u0mitarb">
                    <input type="hidden" name="meta_gruppen_kennung[]">
                  </td>
                  <td>
                    <input type="checkbox" name="meta_gruppen_schreiben[]" value="1" />
                  </td>
                  <td class="text-center"><button type="button" class="meta_gruppen_del btn btn-danger"><i class="fa fa-minus"></i> Löschen</button></td>
                </tr>
              </tbody>
            </table>
            <button type="button" id="meta_gruppen_add" class="btn btn-wd btn-success"><i class="fa fa-plus"></i> Hinzufügen</button>
          </div>
          <div role="tabpanel" class="tab-pane" id="useraccess">
            <p style="padding-top:10px; padding-left:10px">Zugriff für einzelne Personen anhand aktiver Nutzerkennungen erlauben.</p>
            <table data-tool="endlessTable" id="meta_nutzer" class="table table-hover btn-table printHide">
              <thead>
                <tr>
                  <th>Nutzerkennung <i data-toggle="tooltip" title="Es muss zwingend ein Mitarbeiter aus der Liste ausgewählt werden!" class="fa fa-question-circle-o fa-lg"></i></th>
                  <th>Schreibzugriff</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>
                    <input data-tool="typeahead" data-action="searchperson" data-minlength="4" data-dynamic="true" data-cache="false" data-hiddenfield="meta_nutzer_kennung[]" data-mustselectitem="true" type="text" class="form-control" name="meta_nutzer_name[]" placeholder="Geben Sie eine Kennung oder einen Namen (min. 4 Zeichen) ein...">
                    <input type="hidden" name="meta_nutzer_kennung[]">
                  </td>
                  <td>
                    <input type="checkbox" name="meta_nutzer_schreiben[]" value="1" />
                  </td>
                  <td class="text-center"><button type="button" class="meta_nutzer_del btn btn-danger"><i class="fa fa-minus"></i> Löschen</button></td>
                </tr>
              </tbody>
            </table>
            <button type="button" id="meta_nutzer_add" class="btn btn-wd btn-success"><i class="fa fa-plus"></i> Hinzufügen</button>
          </div>
        </div>
      </div>

      <div class="col-sm-offset-1 col-sm-10 printHide">
        <h6 class="info-text text-ul-dot">Bearbeitungskommentar und Übergabe</h6>
        <p>
          An dieser Stelle kann ein Bearbeitungskommentar hinterlegt werden und ein anderer Nutzer zur weiteren Bearbeitung der Dokumentation hinzugezogen werden. Die ausgewählte Person wird mit einer Bitte um Mithilfe beim Ausfüllen der Dokumentation per E-Mail benachrichtigt.
        </p>
        <button type='button' class='btn btn-info btn-wd center-block' id="showNextEditorDialog"><i class="fa fa-arrow-up"></i> Kommentieren und Übergeben</button>
      </div>

    </div>
  </div>
  <!-- end tab-pane -->
</div>
<!-- end tab-content-->

<!-- Wizard footer -->
<div class="wizard-footer">
  <div class="pull-right">
    <button type="button" class="btn btn-info btn-wd" title="Generiert eine Vorschau-PDF des aktuellen Stands" style="margin-right:10px;" id="dlDraftPDF"><i class="fa fa-file-pdf-o"></i> Vorschau-PDF erstellen</button>
    <button type='button' class='btn btn-next btn-fill btn-info btn-wd' name='next' title="Nächste Seite aufrufen. Daten werden automatisch gespeichert">Speichern & Weiter <i class="fa fa-arrow-circle-right"></i></button>
    <button type='button' class='btn btn-finish btn-fill btn-danger btn-wd' name='finish' title="Bearbeitung abschließen. Eingetragene Ansprechpartner werden per E-Mail informiert."><i class="fa fa-check-circle"></i> Abschluss</button>
  </div>

  <div class="pull-left">
    <button type='button' class='btn btn-previous btn-fill btn-info btn-wd' name='previous' title="Vorherige Seite aufrufen"><i class="fa fa-arrow-circle-left"></i> Zurück</button>
  </div>

  <div class="clearfix"></div>

  <button type='button' class='btn btn-fill btn-default btn-wd center-block mt' id="showVerfahrensliste"><i class="fa fa-list"></i> Alle übergreifenden Massnahmen anzeigen</button>
</div>

<!--  Core JS Files  -->
<script src="assets/js/jquery.bootstrap.wizard.js" type="text/javascript"></script>

<!--  Plugin for the Wizard -->
<script src="assets/js/paper-bootstrap-wizard.js"></script>

<!--  More information about jquery.validate here: http://jqueryvalidation.org/   -->
<script src="assets/js/jquery.validate.min.js"></script>

<!--  jQuery Typeahead Plugin -->
<script src="assets/js/jquery.typeahead.min.js" type="text/javascript"></script>

<!--  Bootstrap Select -->
<script src="assets/js/bootstrap-select.min.js" type="text/javascript"></script>

<!-- DataTables -->
<script src="assets/js/datatables.min.js" type="text/javascript"></script>

<!--  Custom WWU JS Files  -->
<script src="assets/js/wizard.js?20210129" type="text/javascript"></script>
